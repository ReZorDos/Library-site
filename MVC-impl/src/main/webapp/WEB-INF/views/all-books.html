<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>All Books</title>
</head>
<body>
<h1>Все книги</h1>

<div th:if="${books != null and !books.isEmpty()}">
  <ul style="list-style-type: none; padding-left: 0;">
    <li th:each="book : ${books}" style="margin-bottom: 15px;">
      <a th:href="@{/books/{id}(id=${book.id})}"
         style="text-decoration: none; color: #333; display: block; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
        <strong th:text="${book.name}"></strong>,
        <span th:text="${book.author}"></span>,
        <span th:text="${book.year}"></span>
      </a>
    </li>
  </ul>

  <div th:if="${totalPages > 1}" style="text-align: center; margin: 20px 0;">

    <a th:href="@{/books/all(offset=${currentPage - 1}, limit=${limit})}"
       th:if="${currentPage > 0}">
      [‹ Предыдущая]
    </a>
    <span th:unless="${currentPage > 0}">[‹ Предыдущая]</span>

    <span th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}">
      <span th:if="${pageNum >= currentPage - 2 and pageNum <= currentPage + 2}">
        <a th:href="@{/books/all(offset=${pageNum}, limit=${limit})}"
           th:if="${pageNum != currentPage}"
           style="margin: 0 5px;">
          [[${pageNum + 1}]]
        </a>
        <strong th:if="${pageNum == currentPage}" style="margin: 0 5px;">
          [[${pageNum + 1}]]
        </strong>
      </span>
    </span>

    <a th:href="@{/books/all(offset=${currentPage + 1}, limit=${limit})}"
       th:if="${currentPage < totalPages - 1}">
      [Следующая ›]
    </a>
    <span th:unless="${currentPage < totalPages - 1}">[Следующая ›]</span>

    <br>
    <small>Страница [[${currentPage + 1}]] из [[${totalPages}]]</small>
  </div>
</div>

<div th:if="${books == null or books.isEmpty()}">
  <p>Ни одна книга не найдена.</p>
</div>

<div style="margin-top: 20px;">
  <a th:href="@{/books/create-book}">
    <button type="button">+ Добавить новую книгу</button>
  </a>
</div>

<div style="margin-top: 10px;">
  <a th:href="@{/}">
    <button type="button">Вернуться на главную</button>
  </a>
</div>
</body>
</html>